box: node:4-slim
build:
  # The steps that will be executed on build
  # Steps make up the actions in your pipeline
  # Read more about steps on our dev center:
  # http://devcenter.wercker.com/docs/steps/index.html
  steps:
    - script:
        code: |
          cd pipeline
          apt-get install imagemagick
          apt-get install graphicsmagick
          npm install && gulp images
deploy:
  steps:
    - install-packages:
      packages: git ssh-client
    - leipert/git-push:
       gh_oauth: $GIT_TOKEN
       repo: rdwatters/hugo-starter
       branch: master
       basedir: public
