{{ $okpages := len (where .Site.Pages ".Params.removefromsearch" "==" nil ) }}
{{ $totalpages := add $okpages 1}}
[
	{{ range $index, $page := .Site.Pages}}
		{"url": "{{ $page.URL }}",
		"title": "{{ $page.Title | markdownify | plainify }}",
		"subtitle": "{{ $page.Params.subtitle | default "" }}",
		"tags": [{{ range $tindex, $tag := $page.Params.tags }}{{ if $tindex }}, {{ end }}"{{ $tag }}"{{ end }}],
		"description": "{{.Description}}",
		"content": {{$page.Plain | jsonify}}}{{if lt $index $totalpages}},{{ end }}
	{{ end }}
]